<md-content layout="column" layout-fill flex style="padding: 25px 20px 20px 20px">

  <div layout="row">

    <h2> {{project.project.name}} </h2>

    <md-select aria-label="status" ng-model="project.project.status" ng-change="project.updateProjectStatus( project.project )" style="margin: 0 20px 0 30px">
      <md-option ng-value="status.name" ng-repeat="status in project.status track by $index">
        <div layout="row">
          <div ng-style="{'background-color': status.color}"
               style="border-radius: 50%; height: 17px; width: 17px;"></div>
          <p style="margin: 0 0 0 10px">{{status.label}}</p>
        </div>
      </md-option>
    </md-select>
    <div flex> </div>

    <div layout="row">
      <p> Gerente do Projeto: </p>
      <p style="font-weight: bold; margin-left: 15px">{{project.project.projectManager.name}} </p>

      <!--<md-input-container>-->
        <!--<label>Gerente de projeto</label>-->
        <!--<md-select ng-model="project.newProject.projectManager">-->
          <!--<md-option ng-repeat="projectManager in project.projectManagers" ng-value="projectManager">-->
            <!--{{projectManager.name}}-->
          <!--</md-option>-->
        <!--</md-select>-->
      <!--</md-input-container>-->

    </div>



  </div>
  <div layout="row">
    <p> Data de Início </p>
    <p style="font-weight: bold; margin-left: 15px">{{project.project.initialDate | date:'dd/MM/yyyy'}}</p>
    <p style="margin-left: 30px;"> Data de Término </p>
    <p style="font-weight: bold; margin-left: 15px">{{project.project.finalDate | date:'dd/MM/yyyy'}}</p>

    <div flex> </div>
    <md-button class="md-raised md-primary" ng-click="project.manageActivity($event, project.project, null, project.milestones)">
      Criar atividade
    </md-button>
    <md-button class="md-raised md-primary" ng-click="project.manageMilestone($event,project.project)">
      Criar milestone
    </md-button>

  </div>

  <md-divider> </md-divider>

  <h3> Atividades do Projeto </h3>



  <div layout="row">

    <div flex>

      <md-list-item ng-repeat="activity in project.project.activities" ng-if="project.project.activities.length">
        <md-checkbox ng-model="activity.status" ng-change="project.updateActivity( activity )"></md-checkbox>
        <p>{{activity.name }} - {{activity.owner.name}}</p>
        <md-button class="md-primary" ng-click="project.manageActivity($event, project.project, activity, project.milestones)">Editar
        </md-button>
        <md-button class="md-primary" ng-click="project.removeActivity($event, project.project, activity)">Remover
        </md-button>
      </md-list-item>

      <div style="border: 1px solid black; height:60px;" layout layout-align="center center" ng-if="!project.project.activities.length">
        <span> O Projeto não possui atividades sem milestone</span>
      </div>

      <md-divider></md-divider>

      <h3> Milestones do Projeto </h3>

      <div ng-repeat="milestone in project.project.milestones" ng-if="project.project.milestones.length" >


        <md-subheader class="md-no-sticky" >
          <div>

            <div layout="row" style="margin-bottom: 10px;">
              <h2>
                {{milestone.name}}
              </h2>
              <div layout="row" style="margin-top: 5px; margin-left: 30px;">
                <p> Data de Início </p>
                <p style="font-weight: bold; margin-left: 15px">{{milestone.initialDate | date:'dd/MM/yyyy'}}</p>
                <p style="margin-left: 30px;"> Data de Término </p>
                <p style="font-weight: bold; margin-left: 15px">{{milestone.finalDate | date:'dd/MM/yyyy'}}</p>
              </div>
              <div flex> </div>
              <md-button class="md-primary"  ng-click="project.manageMilestone($event,project.project, milestone )"> Editar</md-button>
              <md-button class="md-primary" ng-click="project.removeMilestone($event,project.project, milestone )"> Remover</md-button>
            </div>
            <div ng-if="milestone.notes">
              <p> Observação do Milestone</p>
              <p >
                {{milestone.notes}}
              </p>
            </div>

          </div>

        </md-subheader>

        <md-list-item ng-repeat="activity in milestone.activities | orderBy: 'name'" ng-if="milestone.activities.length">

          <md-checkbox ng-model="activity.status" ng-change="project.updateActivity( activity )"></md-checkbox>
          <p>{{activity.name }} - {{activity.owner.name}}</p>

          <md-button class="md-primary" ng-click="project.manageActivity($event, project.project, activity, milestone)">
            Editar
          </md-button>
          <md-button class="md-primary" ng-click="project.removeActivity($event, project.project, activity, milestone)">
            Remover
          </md-button>

        </md-list-item>
        <div style="padding: 0px 20px 0px 20px;" >
          <div style="border: 1px solid black; height:60px;" layout layout-align="center center" ng-if="!milestone.activities.length">
            <span> O Milestone {{milestone.name}} não possui atividades</span>
          </div>
        </div>

        <md-divider></md-divider>
      </div>
      <div style="border: 1px solid black; height:60px;" layout layout-align="center center" ng-if="!project.project.milestones.length">
        <span> O Projeto não possui milestones</span>
      </div>
    </div>

  </div>


</md-content>
